{% extends "base.html" %}
{% block title %}Alugar Imóvel{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow">
    <div class="card-header bg-secondary text-white">
      <h2>Alugar Imóvel</h2>
    </div>
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}
        
        {% if form.non_field_errors %}
          <div class="alert alert-danger">
            {{ form.non_field_errors }}
          </div>
        {% endif %}
        
        <!-- Imóvel (apenas para exibição) -->
        <div class="mb-4">
          <label class="form-label"><strong>Imóvel</strong></label>
          <input type="text" class="form-control" value="{% if imovel_instance %}{{ imovel_instance.referencia }} - {{ imovel_instance.endereco }}{% endif %}" readonly>
        </div>
        
        <hr>
        <!-- Dados do Contrato -->
        <h4 class="mb-3">Dados do Contrato</h4>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="{{ form.inquilino.id_for_label }}" class="form-label">Inquilino</label>
            {{ form.inquilino }}
            {% for error in form.inquilino.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.proprietario.id_for_label }}" class="form-label">Proprietário</label>
            {{ form.proprietario }}
            {% for error in form.proprietario.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.imobiliaria.id_for_label }}" class="form-label">Imobiliária</label>
            {{ form.imobiliaria }}
            {% for error in form.imobiliaria.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-4 mb-3">
            <label class="form-label">Tipo de Contrato</label>
            <input type="text" class="form-control" value="Aluguel" readonly>
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.periodo_contrato.id_for_label }}" class="form-label">Período (meses)</label>
            {{ form.periodo_contrato }}
            {% for error in form.periodo_contrato.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.data_assinatura_contrato.id_for_label }}" class="form-label">Data de Assinatura</label>
            <input type="text" class="form-control" value="{{ form.initial.data_assinatura_contrato }}" readonly>
          </div>
        </div>
        
        <hr>
        <!-- Termos do Contrato -->
        <h4 class="mb-3">Termos do Contrato</h4>
        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="{{ form.data_inicio.id_for_label }}" class="form-label">Data de Início</label>
            {{ form.data_inicio }}
            {% for error in form.data_inicio.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        
        <hr>
        <!-- Condições Financeiras -->
        <h4 class="mb-3">Condições Financeiras</h4>
        <!-- Row 1: Valor e Taxas -->
        <div class="row">
          <div class="col-md-3 mb-3">
            <label for="{{ form.valor_aluguel.id_for_label }}" class="form-label">Valor Aluguel</label>
            {{ form.valor_aluguel }}
            {% for error in form.valor_aluguel.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.taxa_juros.id_for_label }}" class="form-label">Taxa de Juros (%)</label>
            {{ form.taxa_juros }}
            {% for error in form.taxa_juros.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.taxa_multa.id_for_label }}" class="form-label">Taxa de Multa (%)</label>
            {{ form.taxa_multa }}
            {% for error in form.taxa_multa.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.taxa_adm.id_for_label }}" class="form-label">Taxa Adm (%)</label>
            {{ form.taxa_adm }}
            {% for error in form.taxa_adm.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        <!-- Row 2: Garantia e Caução -->
        <div class="row">
          <div class="col-md-3 mb-3">
            <label for="{{ form.garantia.id_for_label }}" class="form-label">Garantia</label>
            {{ form.garantia }}
            {% for error in form.garantia.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.valor_caucao.id_for_label }}" class="form-label">Valor Caução</label>
            {{ form.valor_caucao }}
            {% for error in form.valor_caucao.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.data_pagamento_caucao.id_for_label }}" class="form-label">Data Pagamento Caução</label>
            {{ form.data_pagamento_caucao }}
            {% for error in form.data_pagamento_caucao.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-3 mb-3">
            <label for="{{ form.parcelamento_garantia.id_for_label }}" class="form-label">Parcelamento Garantia</label>
            {{ form.parcelamento_garantia }}
            {% for error in form.parcelamento_garantia.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        <!-- Row 3: Modo e Dia de Pagamento -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.modo_pagamento.id_for_label }}" class="form-label">Modo de Pagamento</label>
            {{ form.modo_pagamento }}
            {% for error in form.modo_pagamento.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.dia_pagamento.id_for_label }}" class="form-label">Dia de Pagamento</label>
            {{ form.dia_pagamento }}
            {% for error in form.dia_pagamento.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        <!-- Row 4: Primeiro Pagamento -->
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="{{ form.data_primeiro_pagamento.id_for_label }}" class="form-label">Data do 1º Pagamento</label>
            {{ form.data_primeiro_pagamento }}
            {% for error in form.data_primeiro_pagamento.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.valor_primeiro_pagamento.id_for_label }}" class="form-label">Valor do 1º Pagamento</label>
            {{ form.valor_primeiro_pagamento }}
            {% for error in form.valor_primeiro_pagamento.errors %}
              <div class="text-danger">{{ error }}</div>
            {% endfor %}
          </div>
        </div>
        
        <hr>
        <!-- Observações -->
        <h4 class="mb-3">Observações</h4>
        <div class="mb-4">
          <label for="{{ form.observacoes.id_for_label }}" class="form-label">Observações</label>
          {{ form.observacoes }}
          {% for error in form.observacoes.errors %}
            <div class="text-danger">{{ error }}</div>
          {% endfor %}
        </div>
        
        <div class="d-flex justify-content-between mt-4">
          <a href="{% url 'contrato_list' %}" class="btn btn-secondary">Cancelar</a>
          <button type="submit" class="btn btn-primary">Confirmar Locação</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
